<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quebec</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBH_yuU7_TfAJmuf_h04UsmKKhC0XPWerA"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #f8fafc; overflow: hidden; }
        #map { width: 100%; height: 100vh; }

        .info-panel {
            position: absolute; top: 16px; left: 16px; background: rgba(255, 255, 255, 0.97);
            padding: 16px 20px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            max-width: 320px; z-index: 1000; border: 1px solid #e2e8f0;
            border-left: 4px solid #8b5cf6;
        }

        .info-title {
            font-size: 15px; font-weight: 600; color: #1e293b; margin-bottom: 6px;
            letter-spacing: -0.02em;
        }

        .info-subtitle {
            font-size: 12px; color: #64748b; margin-bottom: 8px; font-weight: 500;
        }

        .info-description {
            font-size: 11px; color: #64748b; line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="info-panel">
        <div class="info-title">Quebec</div>
        <div class="info-subtitle">Catchment Area: 117 patients</div>
        <div class="info-description">Montreal and Ottawa DBS Centers</div>
    </div>

    <div id="map"></div>

    <script>
        const flowsData = [{"from_lat": 45.28569666299284, "from_lng": -75.69428877240583, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 51.0, "fsa": "K0A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.309921201158076, "from_lng": -75.66100738376578, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 51.0, "fsa": "K0A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.2888725286622, "from_lng": -75.71537259548738, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 51.0, "fsa": "K0A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.30137394536751, "from_lng": -75.67087855211568, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 51.0, "fsa": "K0A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 44.712720765865626, "from_lng": -75.66499670385929, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 148.9, "fsa": "K0E", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.69100941643656, "from_lng": -75.69125659966929, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 148.9, "fsa": "K0E", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.94742170046025, "from_lng": -75.89390047451582, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 75.5, "fsa": "K0G", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 44.55577869735913, "from_lng": -78.15907019002164, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 261.5, "fsa": "K0L", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.565640664451315, "from_lng": -78.16221623716143, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 261.5, "fsa": "K0L", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 45.488454109992304, "from_lng": -75.50879835125356, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 16.8, "fsa": "K1C", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.479353824455096, "from_lng": -75.50469757239526, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 21.8, "fsa": "K1E", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.49879227982782, "from_lng": -75.48540646437311, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 21.8, "fsa": "K1E", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.36773987101415, "from_lng": -75.63727072060199, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 15.6, "fsa": "K1G", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.369175289121586, "from_lng": -75.68307598094717, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 8.6, "fsa": "K1H", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.41503097968887, "from_lng": -75.57782004367975, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 14.4, "fsa": "K1J", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.43183716220003, "from_lng": -75.57978868755028, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 14.4, "fsa": "K1J", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.4356379797356, "from_lng": -75.59026062836173, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 14.4, "fsa": "K1J", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.423818488698544, "from_lng": -75.6849533475142, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 10.2, "fsa": "K1L", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.42198327020076, "from_lng": -75.67810897970651, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 4.1, "fsa": "K1S", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.39366421925326, "from_lng": -75.7010346566994, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 4.1, "fsa": "K1S", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.331122933658726, "from_lng": -75.71053309706748, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 9.9, "fsa": "K1V", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.34682862806698, "from_lng": -75.62795994685392, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 9.9, "fsa": "K1V", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.37917957940172, "from_lng": -75.76499336440487, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 1.6, "fsa": "K1Y", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.402724539022294, "from_lng": -75.69432630261426, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 7.0, "fsa": "K1Z", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.35906575879784, "from_lng": -75.74474946070053, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 7.0, "fsa": "K1Z", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.41380593637309, "from_lng": -75.77083674511248, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 7.0, "fsa": "K1Z", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.39617813096531, "from_lng": -75.75696161177356, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 4.4, "fsa": "K2A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.342799947806036, "from_lng": -75.7046717303491, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 3.7, "fsa": "K2C", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.331208333941404, "from_lng": -75.71874382529579, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 3.7, "fsa": "K2C", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.37980469262128, "from_lng": -75.7113101991506, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 3.7, "fsa": "K2C", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.331301677341536, "from_lng": -75.72494725139471, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 12.4, "fsa": "K2G", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.29778350316818, "from_lng": -75.83846521448658, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 21.0, "fsa": "K2M", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.281116623928185, "from_lng": -75.88402069249919, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 24.7, "fsa": "K2S", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.44045098503088, "from_lng": -75.4997238932505, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 26.0, "fsa": "K4A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.220250571861826, "from_lng": -75.67633388413955, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 25.4, "fsa": "K4M", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.22660026090917, "from_lng": -75.60771033888201, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 34.1, "fsa": "K4P", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.053193121757076, "from_lng": -74.6563437848013, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 106.7, "fsa": "K6H", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 45.038804803814195, "from_lng": -74.6607046516323, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 106.7, "fsa": "K6H", "center": "Montreal", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.90262728321314, "from_lng": -76.07594502555853, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 75.1, "fsa": "K7A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 44.86766146460277, "from_lng": -76.24299296596746, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 8.6, "fsa": "K7H", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.4171166052699, "from_lng": -76.33643298759755, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 63.6, "fsa": "K7S", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.79878092198066, "from_lng": -77.1667916090311, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 5.4, "fsa": "K8A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.82304629335934, "from_lng": -77.12805462048857, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 5.4, "fsa": "K8A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 45.81752337094037, "from_lng": -77.09330031378502, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 5.4, "fsa": "K8A", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 44.19141981399519, "from_lng": -77.44755588721027, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 5.4, "fsa": "K8P", "center": "Montreal", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 53.52114042942919, "from_lng": -113.43975008222723, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 3385.7, "fsa": "T6C", "center": "Montreal", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}, {"from_lat": 66.29717565475629, "from_lng": -73.30246509926275, "to_lat": 45.5017, "to_lng": -73.5673, "distance": 3781.5, "fsa": "X0A", "center": "Montreal", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}, {"from_lat": 44.20805941978092, "from_lng": -77.44348596673578, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 374.6, "fsa": "K0K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.8, "opacity": 0.6}, {"from_lat": 43.05705608936025, "from_lng": -79.13111806362008, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 204.7, "fsa": "L0S", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.91178589461808, "from_lng": -78.89362224090678, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 222.5, "fsa": "L2A", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.15950474714122, "from_lng": -79.26619094107885, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 182.1, "fsa": "L2S", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.193671942616334, "from_lng": -79.52765188384679, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 153.9, "fsa": "L3M", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.73553562037701, "from_lng": -79.69824784799162, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 170.6, "fsa": "L6S", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.382585225606704, "from_lng": -79.8337875210037, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 141.4, "fsa": "L7M", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.56052514760464, "from_lng": -79.61120845258493, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 373.0, "fsa": "L7W", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.8, "opacity": 0.6}, {"from_lat": 43.52098745524419, "from_lng": -80.45878097596561, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 114.6, "fsa": "N0B", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.902968046063236, "from_lng": -80.38462881219503, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 84.2, "fsa": "N0E", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.93926691959786, "from_lng": -80.42125491631447, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 84.2, "fsa": "N0E", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.97013380023406, "from_lng": -81.04916028192598, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 138.6, "fsa": "N0G", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.58006739870666, "from_lng": -81.15853327386336, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 212.9, "fsa": "N0H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.03815935485003, "from_lng": -80.67436989017433, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 51.4, "fsa": "N0J", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.49040094376619, "from_lng": -81.1609150227291, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 71.9, "fsa": "N0K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.50006638539939, "from_lng": -81.12242584195303, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 71.9, "fsa": "N0K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.84916834478871, "from_lng": -81.40733959803083, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 23.6, "fsa": "N0L", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.81756316640562, "from_lng": -81.38234619832767, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 23.6, "fsa": "N0L", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.80845407106585, "from_lng": -81.35992610287319, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 23.6, "fsa": "N0L", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.25520151039601, "from_lng": -81.48051887664612, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 48.3, "fsa": "N0M", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.24748970045643, "from_lng": -81.5277159428368, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 48.3, "fsa": "N0M", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.38958104705022, "from_lng": -82.21060708724966, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 113.9, "fsa": "N0P", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.584882386971586, "from_lng": -80.20221617590148, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 120.9, "fsa": "N1E", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.52564384867089, "from_lng": -80.21305609425951, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 123.3, "fsa": "N1G", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.54678492610134, "from_lng": -80.3115180123715, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 115.5, "fsa": "N1K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.38214145073113, "from_lng": -80.35018113211662, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 98.5, "fsa": "N1R", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.42742745948754, "from_lng": -80.45485159110706, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 107.4, "fsa": "N2G", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.47971930359449, "from_lng": -80.53233924916618, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 108.8, "fsa": "N2H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.458526298200034, "from_lng": -80.4469960229828, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 108.8, "fsa": "N2H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 44.1788247575771, "from_lng": -81.635254629557, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 155.3, "fsa": "N2Z", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.89098640468049, "from_lng": -80.68746463287196, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 57.3, "fsa": "N4G", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.119055440489376, "from_lng": -80.7191978691694, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 52.5, "fsa": "N4S", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.10657834746272, "from_lng": -80.69928278169344, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 52.5, "fsa": "N4S", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.13527671555396, "from_lng": -80.75453516044048, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 55.9, "fsa": "N4T", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.71911801983372, "from_lng": -80.92523343763531, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 102.0, "fsa": "N4W", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.74257243847149, "from_lng": -80.9617591751675, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 102.0, "fsa": "N4W", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 43.39434196805903, "from_lng": -80.98114606582992, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 63.2, "fsa": "N5A", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.00922546960566, "from_lng": -80.86809396339974, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 39.6, "fsa": "N5C", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.75778874170523, "from_lng": -80.92853113508112, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 47.0, "fsa": "N5H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.66896977984501, "from_lng": -81.16948646272898, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 38.2, "fsa": "N5L", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.76731930702565, "from_lng": -81.15219526945192, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 27.0, "fsa": "N5P", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.74206732128832, "from_lng": -81.18202224486268, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 28.7, "fsa": "N5R", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.95795349919252, "from_lng": -81.21410873566012, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 2.7, "fsa": "N5Z", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.022101436728136, "from_lng": -81.23069935766327, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 6.4, "fsa": "N6A", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.949375831291476, "from_lng": -81.2684398226952, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1.6, "fsa": "N6C", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.961111092674834, "from_lng": -81.28127012595888, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1.6, "fsa": "N6C", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.94804924942417, "from_lng": -81.24263048438142, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 4.0, "fsa": "N6E", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.00809212913683, "from_lng": -81.32245955869719, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 11.1, "fsa": "N6G", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.011155274451426, "from_lng": -81.32040834141034, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 9.3, "fsa": "N6H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 43.01059518718469, "from_lng": -81.32667837835095, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 9.3, "fsa": "N6H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.941464669221595, "from_lng": -81.31990257525737, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 4.3, "fsa": "N6J", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.951439627660626, "from_lng": -81.37170259909288, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 9.0, "fsa": "N6K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.93965741589609, "from_lng": -81.27471775359263, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 9.0, "fsa": "N6K", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.0, "opacity": 0.4}, {"from_lat": 42.959692161881605, "from_lng": -82.33157766925507, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 103.8, "fsa": "N7W", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.02087372748978, "from_lng": -82.60436668718305, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 169.5, "fsa": "N8H", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.31282727548463, "from_lng": -82.93273661121623, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 182.2, "fsa": "N8T", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.30641415683957, "from_lng": -82.97887595069902, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 182.2, "fsa": "N8T", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.27934214052084, "from_lng": -82.90570522109051, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 182.2, "fsa": "N8T", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.275106934277034, "from_lng": -82.95707792726864, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 182.0, "fsa": "N8W", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.34295814534482, "from_lng": -83.0311804850604, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 186.9, "fsa": "N8Y", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.302835905626836, "from_lng": -82.99836350771314, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 186.9, "fsa": "N8Y", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.29263533276039, "from_lng": -82.9940405529877, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 188.4, "fsa": "N9A", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.29531157030635, "from_lng": -83.00662886023295, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 190.2, "fsa": "N9B", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.26162575903552, "from_lng": -83.0852963703697, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 188.6, "fsa": "N9J", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.09807661365058, "from_lng": -83.08084104412664, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 202.2, "fsa": "N9V", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 42.046596600908344, "from_lng": -82.7720430000615, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 179.4, "fsa": "N9Y", "center": "Ottawa", "color": "#8b5cf6", "weight": 1.3, "opacity": 0.5}, {"from_lat": 49.278485680706105, "from_lng": -88.17976761195867, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1283.1, "fsa": "P0T", "center": "Ottawa", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}, {"from_lat": 48.44700555057811, "from_lng": -89.22189573733952, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1361.1, "fsa": "P7A", "center": "Ottawa", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}, {"from_lat": 48.44781729301833, "from_lng": -89.2052565506899, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1366.1, "fsa": "P7B", "center": "Ottawa", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}, {"from_lat": 48.3644947723245, "from_lng": -89.38811037622105, "to_lat": 45.4215, "to_lng": -75.6972, "distance": 1382.9, "fsa": "P7K", "center": "Ottawa", "color": "#8b5cf6", "weight": 2.5, "opacity": 0.75}];
        const centers = [{"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Montreal", "lat": 45.5017, "lon": -73.5673}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}, {"name": "Ottawa", "lat": 45.4215, "lon": -75.6972}];

        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 48.0, lng: -71.0 },
                zoom: 5.5,
                mapTypeId: 'terrain',
                styles: [
                    { featureType: 'administrative.province', elementType: 'geometry.stroke',
                       stylers: [{ color: '#1e293b' }, { weight: 2.5 }] },
                    { featureType: 'water', elementType: 'geometry', stylers: [{ color: '#dbeafe' }] },
                    { featureType: 'landscape', elementType: 'geometry', stylers: [{ color: '#f8fafc' }] },
                    { featureType: 'poi', stylers: [{ visibility: 'off' }] },
                    { featureType: 'road', elementType: 'labels', stylers: [{ visibility: 'off' }] }
                ],
                zoomControl: true,
                mapTypeControl: false,
                streetViewControl: false,
                fullscreenControl: true
            });

            // Add DBS centers
            centers.forEach(center => {
                new google.maps.Marker({
                    position: { lat: center.lat, lng: center.lon },
                    map: map,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 8,
                        fillColor: '#8b5cf6',
                        fillOpacity: 1,
                        strokeColor: 'white',
                        strokeWeight: 3
                    },
                    title: center.name,
                    zIndex: 1000
                });
            });

            // Draw patient flows
            flowsData.forEach(flow => {
                const arrowScale = flow.distance > 1000 ? 4.5 : (flow.distance > 500 ? 4.0 : 3.5);

                const lineSymbol = {
                    path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
                    scale: arrowScale,
                    strokeColor: flow.color,
                    fillColor: flow.color,
                    fillOpacity: 1
                };

                new google.maps.Polyline({
                    path: [
                        { lat: flow.from_lat, lng: flow.from_lng },
                        { lat: flow.to_lat, lng: flow.to_lng }
                    ],
                    geodesic: true,
                    strokeColor: flow.color,
                    strokeOpacity: flow.opacity,
                    strokeWeight: flow.weight,
                    icons: [{
                        icon: lineSymbol,
                        offset: '65%'
                    }],
                    map: map
                });

                // Patient origin marker
                new google.maps.Marker({
                    position: { lat: flow.from_lat, lng: flow.from_lng },
                    map: map,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 2.5,
                        fillColor: flow.color,
                        fillOpacity: 0.7,
                        strokeColor: 'white',
                        strokeWeight: 0.5
                    },
                    zIndex: 10
                });
            });
        }

        window.onload = initMap;
    </script>
</body>
</html>